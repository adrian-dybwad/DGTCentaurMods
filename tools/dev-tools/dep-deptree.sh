Last login: Wed Oct 15 01:32:56 on ttys005
adriandybwad@DEV-5-MBP16-381 purpleair-one % cd frontend
adriandybwad@DEV-5-MBP16-381 frontend % npm run serve                                                              
npm error Missing script: "serve"
npm error
npm error To see a list of scripts, run:
npm error   npm run
npm error A complete log of this run can be found in: /Users/adriandybwad/.npm/_logs/2025-10-15T18_26_33_947Z-debug-0.log
adriandybwad@DEV-5-MBP16-381 frontend % ng serve
Node.js version v23.10.0 detected.
Odd numbered Node.js versions will not enter LTS status and should not be used for production. For more information, please see https://nodejs.org/en/about/previous-releases/.
⠋ Generating browser application bundles (phase: setup)...    TypeScript compiler options "target" and "useDefineForClassFields" are set to "ES2022" and "false" respectively by the Angular CLI. To control ECMA version and features use the Browerslist configuration. For more information, see https://angular.io/guide/build#configuring-browser-compatibility
    NOTE: You can set the "target" to "ES2022" in the project's tsconfig to remove this warning.
✔ Browser application bundle generation complete.

Initial Chunk Files                                                                                     | Names                                                                        |  Raw Size
vendor.js                                                                                               | vendor                                                                       |   8.44 MB | 
styles.css, styles.js                                                                                   | styles                                                                       |   2.31 MB | 
main.js                                                                                                 | main                                                                         |   1.21 MB | 
polyfills.js                                                                                            | polyfills                                                                    | 333.22 kB | 
runtime.js                                                                                              | runtime                                                                      |  14.43 kB | 

                                                                                                        | Initial Total                                                                |  12.30 MB

Lazy Chunk Files                                                                                        | Names                                                                        |  Raw Size
src_app_modules_admin_dashboards_logs_logs-explorer_module_ts.js                                        | app-modules-admin-dashboards-logs-logs-explorer-module                       |   1.61 MB | 
default-node_modules_angular_material_fesm2022_chips_mjs-node_modules_angular_material_fesm20-92b6fc.js | app-modules-admin-dashboards-email-configurations-email-configuration-module |   1.53 MB | 
default-node_modules_ng-apexcharts_fesm2022_ng-apexcharts_mjs.js                                        | app-modules-admin-dashboards-projects-detail-project-detail-module           | 746.86 kB | 
node_modules_codemirror_lib_codemirror_js.js                                                            | codemirror                                                                   | 414.37 kB | 
src_app_modules_auth_sign-in_sign-in_module_ts.js                                                       | app-modules-auth-sign-in-sign-in-module                                      | 362.62 kB | 
src_app_modules_admin_dashboards_email-configurations_email-configuration_module_ts.js                  | app-modules-admin-dashboards-email-configurations-email-configuration-module | 267.65 kB | 
default-node_modules_angular_material_fesm2022_sort_mjs-node_modules_angular_material_fesm202-e90f3a.js | app-modules-admin-dashboards-projects-projects-module                        | 245.04 kB | 
default-node_modules_angular_material_fesm2022_tabs_mjs.js                                              | app-modules-admin-dashboards-projects-projects-module                        | 204.00 kB | 
src_app_modules_admin_dashboards_users_users_module_ts.js                                               | app-modules-admin-dashboards-users-users-module                              | 202.20 kB | 
src_app_modules_admin_dashboards_keys_keys_module_ts.js                                                 | app-modules-admin-dashboards-keys-keys-module                                | 189.57 kB | 
src_app_modules_admin_dashboards_organization_organization_module_ts.js                                 | app-modules-admin-dashboards-organization-organization-module                | 166.52 kB | 
src_app_modules_admin_dashboards_organization_detail_organization-detail_module_ts.js                   | app-modules-admin-dashboards-organization-detail-organization-detail-module  | 160.86 kB | 
src_app_modules_admin_dashboards_projects_detail_project-detail_module_ts.js                            | app-modules-admin-dashboards-projects-detail-project-detail-module           | 123.91 kB | 
src_app_modules_admin_dashboards_payments_payments_module_ts.js                                         | app-modules-admin-dashboards-payments-payments-module                        | 115.97 kB | 
default-src_app_modules_admin_dashboards_pa-credit-consumption-report_pa-credit-consumption-r-170c57.js | app-modules-admin-dashboards-projects-detail-project-detail-module           | 102.06 kB | 
src_app_modules_admin_dashboards_projects_projects_module_ts.js                                         | app-modules-admin-dashboards-projects-projects-module                        |  85.04 kB | 
default-src_app_modules_admin_dashboards_keys_add_add_component_ts.js                                   | app-modules-admin-dashboards-projects-detail-project-detail-module           |  78.77 kB | 
default-src_app_shared_search-handler_search-handler_service_ts-node_modules_primeng_fesm2022-3233bb.js | app-modules-admin-dashboards-users-users-module                              |  78.28 kB | 
src_app_modules_admin_dashboards_keys_detail_key-detail_module_ts.js                                    | app-modules-admin-dashboards-keys-detail-key-detail-module                   |  73.87 kB | 
default-src_app_modules_admin_dashboards_keys_keys_service_ts-node_modules_angular_material_f-63c93f.js | app-modules-admin-dashboards-projects-detail-project-detail-module           |  50.80 kB | 
default-src_app_modules_admin_dashboards_keys_migrate_migrate_component_ts.js                           | app-modules-admin-dashboards-projects-detail-project-detail-module           |  41.14 kB | 
default-src_app_modules_admin_dashboards_organization_add-note_add-note_component_ts-src_app_-7028a1.js | app-modules-admin-dashboards-organization-detail-organization-detail-module  |  32.73 kB | 
default-src_app_modules_admin_dashboards_projects_add_add_component_ts.js                               | app-modules-admin-dashboards-projects-projects-module                        |  18.27 kB | 
default-src_app_modules_admin_dashboards_pa-multi-select-dropdown_pa-multi-select-dropdown_co-ecb46d.js | app-modules-admin-dashboards-projects-detail-project-detail-module           |  15.25 kB | 
src_app_modules_auth_sign-out_sign-out_module_ts.js                                                     | app-modules-auth-sign-out-sign-out-module                                    |  11.94 kB | 
common.js                                                                                               | common                                                                       |   9.92 kB | 
src_app_modules_admin_pages_error_error-404_error-404_module_ts.js                                      | app-modules-admin-pages-error-error-404-error-404-module                     |   6.22 kB | 

Build at: 2025-10-15T18:26:57.849Z - Hash: ffc1fadd44fe360f - Time: 9262ms

Warning: /Users/adriandybwad/git/purpleair-one/frontend/node_modules/@ctrl/ngx-codemirror/fesm2022/ctrl-ngx-codemirror.mjs depends on 'codemirror'. CommonJS or AMD dependencies can cause optimization bailouts.
For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies

Warning: /Users/adriandybwad/git/purpleair-one/frontend/node_modules/ang-jsoneditor/fesm2022/ang-jsoneditor.mjs depends on 'jsoneditor'. CommonJS or AMD dependencies can cause optimization bailouts.
For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies



** Angular Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200/ **


✔ Compiled successfully.
✔ Browser application bundle generation complete.

Initial Chunk Files                                       | Names                                           |  Raw Size
runtime.js                                                | runtime                                         |  14.43 kB | 

Lazy Chunk Files                                          | Names                                           |  Raw Size
src_app_modules_admin_dashboards_users_users_module_ts.js | app-modules-admin-dashboards-users-users-module | 202.43 kB | 

30 unchanged chunks

Build at: 2025-10-15T22:38:23.519Z - Hash: 5934f1198b3b233d - Time: 4826ms

Warning: /Users/adriandybwad/git/purpleair-one/frontend/src/app/modules/admin/dashboards/services/date-time.service.ts depends on 'moment-timezone'. CommonJS or AMD dependencies can cause optimization bailouts.
For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies



✔ Compiled successfully.
✔ Browser application bundle generation complete.

Initial Chunk Files                                       | Names                                           |  Raw Size
main.js                                                   | main                                            |   1.21 MB | 
runtime.js                                                | runtime                                         |  14.43 kB | 

Lazy Chunk Files                                          | Names                                           |  Raw Size
src_app_modules_auth_sign-in_sign-in_module_ts.js         | app-modules-auth-sign-in-sign-in-module         | 362.62 kB | 
src_app_modules_admin_dashboards_users_users_module_ts.js | app-modules-admin-dashboards-users-users-module | 201.98 kB | 

28 unchanged chunks

Build at: 2025-10-16T02:20:30.590Z - Hash: 3b89f86756608eff - Time: 1680ms

✔ Compiled successfully.
✔ Browser application bundle generation complete.

Initial Chunk Files                                       | Names                                           |  Raw Size
runtime.js                                                | runtime                                         |  14.43 kB | 

Lazy Chunk Files                                          | Names                                           |  Raw Size
src_app_modules_auth_sign-in_sign-in_module_ts.js         | app-modules-auth-sign-in-sign-in-module         | 362.27 kB | 
src_app_modules_admin_dashboards_users_users_module_ts.js | app-modules-admin-dashboards-users-users-module | 202.43 kB | 

29 unchanged chunks

Build at: 2025-10-16T02:20:38.434Z - Hash: e9a9464054977896 - Time: 1309ms

✔ Compiled successfully.
^C
adriandybwad@DEV-5-MBP16-381 frontend % ssh pi@dgt.local                
pi@dgt.local's password: 
Linux dgt 6.12.47+rpt-rpi-v7 #1 SMP Raspbian 1:6.12.47-1+rpt1 (2025-09-16) armv7l

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Thu Oct 16 08:07:26 2025 from fd78:6b5a:4855:2f47:c32:2870:a4d9:994e

SSH is enabled and the default password for the 'pi' user has not been changed.
This is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.

pi@dgt:~ $ # Check how big /tmp is
sudo du -sh /tmp

# Delete everything inside (not the directory itself)
sudo rm -rf /tmp/* /tmp/.[!.]* /tmp/..?*

# Recreate it with correct permissions (just to be safe)
sudo chmod 1777 /tmp
72M /tmp
pi@dgt:~ $ lsblk -o NAME,SIZE,FSTYPE,MOUNTPOINT
df -h /
NAME         SIZE FSTYPE MOUNTPOINT
loop0        425M swap   
mmcblk0     14.8G        
├─mmcblk0p1  512M vfat   /boot/firmware
└─mmcblk0p2 14.3G ext4   /
zram0        425M swap   [SWAP]
Filesystem      Size  Used Avail Use% Mounted on
/dev/mmcblk0p2   15G  2.2G   12G  16% /
pi@dgt:~ $ sudo raspi-config
# → Advanced Options → Expand Filesystem → Finish → Reboot

Welcome to fdisk (util-linux 2.41).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

This disk is currently in use - repartitioning is probably a bad idea.
It's recommended to umount all file systems, and swapoff all swap
partitions on this disk.


Command (m for help): 
Disk /dev/mmcblk0: 14.84 GiB, 15931539456 bytes, 31116288 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x0394e450

Device         Boot   Start      End  Sectors  Size Id Type
/dev/mmcblk0p1        16384  1064959  1048576  512M  c W95 FAT32 (LBA)
/dev/mmcblk0p2      1064960 31116287 30051328 14.3G 83 Linux

Command (m for help): Partition number (1,2, default 2): 
Partition 2 has been deleted.

Command (m for help): Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): Partition number (2-4, default 2): First sector (2048-31116287, default 2048): Last sector, +/-sectors or +/-size{K,M,G,T,P} (1064960-31116287, default 31116287): 
Created a new partition 2 of type 'Linux' and of size 14.3 GiB.
Partition #2 contains a ext4 signature.

Command (m for help): 
Disk /dev/mmcblk0: 14.84 GiB, 15931539456 bytes, 31116288 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x0394e450

Device         Boot   Start      End  Sectors  Size Id Type
/dev/mmcblk0p1        16384  1064959  1048576  512M  c W95 FAT32 (LBA)
/dev/mmcblk0p2      1064960 31116287 30051328 14.3G 83 Linux

Command (m for help): The partition table has been altered.
Syncing disks.

pi@dgt:~ $ Read from remote host dgt.local: Connection reset by peer
Connection to dgt.local closed.
client_loop: send disconnect: Broken pipe
adriandybwad@DEV-5-MBP16-381 frontend % ssh pi@dgt.local
pi@dgt.local's password: 
Linux dgt 6.12.47+rpt-rpi-v7 #1 SMP Raspbian 1:6.12.47-1+rpt1 (2025-09-16) armv7l

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Thu Oct 16 08:51:25 2025 from 192.168.0.230

SSH is enabled and the default password for the 'pi' user has not been changed.
This is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.

pi@dgt:~ $ cd ~/DGTCentaurMods/build
./build.sh master          # or a branch/tag you’re working on
sudo apt -y install ./releases/dgtcentaurmods_1.3.3_armhf.deb
::: Cleaning
::: Getting version
::: Staging build
::: Setting permissions
chown: warning: '.' should be ':': ‘root.root’
Cloning Stockfish repo
Cloning into 'Stockfish'...
remote: Enumerating objects: 34111, done.
remote: Total 34111 (delta 0), reused 0 (delta 0), pack-reused 34111 (from 1)
Receiving objects: 100% (34111/34111), 40.71 MiB | 1.24 MiB/s, done.
Resolving deltas: 100% (26038/26038), done.
Updating files: 100% (67/67), done.
::: Patching Stockfish sqlite include
Default net: nn-6877cd24400e.nnue
Downloading https://tests.stockfishchess.org/api/nn/nn-6877cd24400e.nnue

Config:
debug: 'no'
sanitize: 'none'
optimize: 'yes'
arch: 'armv7'
bits: '32'
kernel: 'Linux'
os: 'GNU/Linux'
prefetch: 'yes'
popcnt: 'no'
pext: 'no'
sse: 'no'
mmx: 'no'
sse2: 'no'
ssse3: 'no'
sse41: 'no'
avx2: 'no'
avx512: 'no'
vnni256: 'no'
vnni512: 'no'
neon: 'no'

Flags:
CXX: g++
CXXFLAGS:   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto
LDFLAGS:  -lsqlite3   -L/usr/local/lib/ -L/usr/lib -latomic -lsqlite3 -Wl,--no-as-needed -lpthread   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -flto=jobserver

Testing config sanity. If this fails, try 'make help' ...

make ARCH=armv7 COMP=gcc all
make[1]: Entering directory '/tmp/Stockfish/src'
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o benchmark.o benchmark.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o bitbase.o bitbase.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o bitboard.o bitboard.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o endgame.o endgame.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o evaluate.o evaluate.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o main.o main.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o material.o material.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o misc.o misc.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o movegen.o movegen.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o movepick.o movepick.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o pawns.o pawns.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o position.o position.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o psqt.o psqt.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o search.o search.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o thread.o thread.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o timeman.o timeman.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tt.o tt.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o uci.o uci.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o ucioption.o ucioption.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tune.o tune.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tbprobe.o syzygy/tbprobe.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o evaluate_nnue.o nnue/evaluate_nnue.cpp
g++   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o half_ka_v2_hm.o nnue/features/half_ka_v2_hm.cpp
g++ -o stockfish benchmark.o bitbase.o bitboard.o endgame.o evaluate.o main.o material.o misc.o movegen.o movepick.o pawns.o position.o psqt.o search.o thread.o timeman.o tt.o uci.o ucioption.o tune.o tbprobe.o evaluate_nnue.o half_ka_v2_hm.o  -lsqlite3   -L/usr/local/lib/ -L/usr/lib -latomic -lsqlite3 -Wl,--no-as-needed -lpthread   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -flto=jobserver  -L/usr/local/lib/ -L/usr/lib -latomic -lsqlite3 -Wl,--no-as-needed -lpthread   -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -Wall -Wcast-qual -fno-exceptions -std=c++17  -I/usr/local/include/sqlite3.h -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -flto=jobserver
make[1]: Leaving directory '/tmp/Stockfish/src'
::: Building version 1.3.3
dpkg-deb: warning: root directory /tmp/dgtcentaurmods_1.3.3_armhf has unusual owner or group 1000:1000
dpkg-deb: hint: you might need to pass --root-owner-group, see <https://wiki.debian.org/Teams/Dpkg/RootlessBuilds> for further details
dpkg-deb: warning: ignoring 1 warning about the control file(s)
dpkg-deb: building package 'dgtcentaurmods' in '/home/pi/DGTCentaurMods/build/releases/dgtcentaurmods_1.3.3_armhf.deb'.
dpkg-deb (subprocess): compressing tar member: lzma write error: No space left on device
dpkg-deb: error: <compress> from tar -cf subprocess returned error exit status 2
Reading package lists... Error!
Error: This is not a valid DEB archive, missing 'data.tar' member
Error: Could not read meta data from /home/pi/DGTCentaurMods/build/releases/dgtcentaurmods_1.3.3_armhf.deb
Error: The package lists or status file could not be parsed or opened.
pi@dgt:~/DGTCentaurMods/build $ # See usage
df -h
df -i
Filesystem      Size  Used Avail Use% Mounted on
udev             80M     0   80M   0% /dev
tmpfs            86M  2.5M   83M   3% /run
/dev/mmcblk0p2   15G  2.2G   12G  16% /
tmpfs           213M     0  213M   0% /dev/shm
tmpfs           5.0M  8.0K  5.0M   1% /run/lock
tmpfs           1.0M     0  1.0M   0% /run/credentials/systemd-journald.service
tmpfs           213M  208M  5.5M  98% /tmp
/dev/mmcblk0p1  510M   78M  433M  16% /boot/firmware
tmpfs           1.0M     0  1.0M   0% /run/credentials/getty@tty1.service
tmpfs            43M  8.0K   43M   1% /run/user/1000
Filesystem      Inodes IUsed   IFree IUse% Mounted on
udev             20360   431   19929    3% /dev
tmpfs            54525   733   53792    2% /run
/dev/mmcblk0p2  916320 77365  838955    9% /
tmpfs            54525     1   54524    1% /dev/shm
tmpfs            54525     4   54521    1% /run/lock
tmpfs             1024     1    1023    1% /run/credentials/systemd-journald.service
tmpfs          1048576   346 1048230    1% /tmp
/dev/mmcblk0p1       0     0       0     - /boot/firmware
tmpfs             1024     1    1023    1% /run/credentials/getty@tty1.service
tmpfs            10905    35   10870    1% /run/user/1000
pi@dgt:~/DGTCentaurMods/build $ # Free the RAM-backed /tmp
sudo rm -rf /tmp/* /tmp/.[!.]* /tmp/..?*
sudo chmod 1777 /tmp
pi@dgt:~/DGTCentaurMods/build $ cd ~
cd DGTCentaurMods
git pull
cd ~/DGTCentaurMods/build
./build.sh master          # or a branch/tag you’re working on
remote: Enumerating objects: 7, done.
remote: Counting objects: 100% (7/7), done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 4 (delta 3), reused 4 (delta 3), pack-reused 0 (from 0)
Unpacking objects: 100% (4/4), 984 bytes | 82.00 KiB/s, done.
From https://github.com/adrian-dybwad/DGTCentaurMods
   32f5a26..ddcbf26  master     -> origin/master
Updating 32f5a26..ddcbf26
Fast-forward
 build/build.sh | 71 +++++++++++++++++++++++++++++------------------------------------------
 1 file changed, 29 insertions(+), 42 deletions(-)
::: Cleaning
::: Getting version
::: Staging build
::: Setting permissions
Cloning Stockfish repo
Cloning into 'Stockfish'...
remote: Enumerating objects: 34111, done.
remote: Total 34111 (delta 0), reused 0 (delta 0), pack-reused 34111 (from 1)
Receiving objects: 100% (34111/34111), 40.71 MiB | 1.16 MiB/s, done.
Resolving deltas: 100% (26038/26038), done.
Updating files: 100% (67/67), done.
Default net: nn-6877cd24400e.nnue
Downloading https://tests.stockfishchess.org/api/nn/nn-6877cd24400e.nnue

Config:
debug: 'no'
sanitize: 'none'
optimize: 'yes'
arch: 'armv7'
bits: '32'
kernel: 'Linux'
os: 'GNU/Linux'
prefetch: 'yes'
popcnt: 'no'
pext: 'no'
sse: 'no'
mmx: 'no'
sse2: 'no'
ssse3: 'no'
sse41: 'no'
avx2: 'no'
avx512: 'no'
vnni256: 'no'
vnni512: 'no'
neon: 'no'

Flags:
CXX: g++
CXXFLAGS: -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto
LDFLAGS:  -L/usr/local/lib/ -L/usr/lib -latomic -lsqlite3 -Wl,--no-as-needed -lpthread -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -flto=jobserver

Testing config sanity. If this fails, try 'make help' ...

make ARCH=armv7 COMP=gcc all
make[1]: Entering directory '/var/tmp/Stockfish/src'
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o benchmark.o benchmark.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o bitbase.o bitbase.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o bitboard.o bitboard.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o endgame.o endgame.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o evaluate.o evaluate.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o main.o main.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o material.o material.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o misc.o misc.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o movegen.o movegen.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o movepick.o movepick.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o pawns.o pawns.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o position.o position.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o psqt.o psqt.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o search.o search.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o thread.o thread.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o timeman.o timeman.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tt.o tt.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o uci.o uci.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o ucioption.o ucioption.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tune.o tune.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o tbprobe.o syzygy/tbprobe.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o evaluate_nnue.o nnue/evaluate_nnue.cpp
g++ -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto   -c -o half_ka_v2_hm.o nnue/features/half_ka_v2_hm.cpp
g++ -o stockfish benchmark.o bitbase.o bitboard.o endgame.o evaluate.o main.o material.o misc.o movegen.o movepick.o pawns.o position.o psqt.o search.o thread.o timeman.o tt.o uci.o ucioption.o tune.o tbprobe.o evaluate_nnue.o half_ka_v2_hm.o  -L/usr/local/lib/ -L/usr/lib -latomic -lsqlite3 -Wl,--no-as-needed -lpthread -Wall -Wcast-qual -fno-exceptions -std=c++17   -pedantic -Wextra -Wshadow -DUSE_PTHREADS -DNDEBUG -O3 -flto -flto=jobserver
make[1]: Leaving directory '/var/tmp/Stockfish/src'
::: Building version 1.3.3
dpkg-deb: building package 'dgtcentaurmods' in '/home/pi/DGTCentaurMods/build/releases/dgtcentaurmods_1.3.3_armhf.deb'.
pi@dgt:~/DGTCentaurMods/build $ sudo apt -y install ./releases/dgtcentaurmods_1.3.3_armhf.deb
sudo systemctl restart dgt*      # restart services (service names vary by build)
Note, selecting 'dgtcentaurmods' instead of './releases/dgtcentaurmods_1.3.3_armhf.deb'
Solving dependencies... Error!
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

Unsatisfied dependencies:
 dgtcentaurmods : Depends: ntp but it is not installable
                  Depends: libtiff5 but it is not installable
Error: Unable to correct problems, you have held broken packages.
Error: The following information from --solver 3.0 may provide additional context:
   Unable to satisfy dependencies. Reached two conflicting decisions:
   1. dgtcentaurmods:armhf=1.3.3 is selected for install
   2. dgtcentaurmods:armhf Depends ntp
      but none of the choices are installable:
      [no choices]
pi@dgt:~/DGTCentaurMods/build $ Connection to dgt.local closed by remote host.
Connection to dgt.local closed.
client_loop: send disconnect: Broken pipe
adriandybwad@DEV-5-MBP16-381 frontend % ssh pi@dgt.local
pi@dgt.local's password: 
Linux dgt 6.12.47+rpt-rpi-v7 #1 SMP Raspbian 1:6.12.47-1+rpt1 (2025-09-16) armv7l

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Thu Oct 16 08:58:04 2025 from 192.168.0.230

SSH is enabled and the default password for the 'pi' user has not been changed.
This is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.

pi@dgt:~ $ sudo apt-get install apt-rdepends
apt-rdepends dgtcentaurmods
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libapt-pkg-perl
Suggested packages:
  springgraph | graphviz
The following NEW packages will be installed:
  apt-rdepends libapt-pkg-perl
0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 76.8 kB of archives.
After this operation, 249 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://mirror.fcix.net/raspbian/raspbian trixie/main armhf libapt-pkg-perl armhf 0.1.42 [62.7 kB]
Get:2 http://mirror.fcix.net/raspbian/raspbian trixie/main armhf apt-rdepends all 1.3.0-10 [14.1 kB]
Fetched 76.8 kB in 1s (81.0 kB/s)      
Selecting previously unselected package libapt-pkg-perl.
(Reading database ... 69464 files and directories currently installed.)
Preparing to unpack .../libapt-pkg-perl_0.1.42_armhf.deb ...
Unpacking libapt-pkg-perl (0.1.42) ...
Selecting previously unselected package apt-rdepends.
Preparing to unpack .../apt-rdepends_1.3.0-10_all.deb ...
Unpacking apt-rdepends (1.3.0-10) ...
Setting up libapt-pkg-perl (0.1.42) ...
Setting up apt-rdepends (1.3.0-10) ...
Processing triggers for man-db (2.13.1-1) ...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods
dgtcentaurmods
pi@dgt:~ $ ls
DGTCentaurMods
pi@dgt:~ $ apt-rdepends DGTCentaurMods/
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package DGTCentaurMods/
DGTCentaurMods/
pi@dgt:~ $ cd DGTCentaurMods/
pi@dgt:~/DGTCentaurMods $ ls
build  DGTCentaurMods  LICENSE.md  README.md  tools
pi@dgt:~/DGTCentaurMods $ cd build
pi@dgt:~/DGTCentaurMods/build $ ls
build.sh  CI  config  patches  README.md  releases
pi@dgt:~/DGTCentaurMods/build $ cd releases
pi@dgt:~/DGTCentaurMods/build/releases $ ls
dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends dgtcentaurmods_1.3.3_armhf.deb 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods_1.3.3_armhf.deb
dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends ./dgtcentaurmods_1.3.3_armhf.deb 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package ./dgtcentaurmods_1.3.3_armhf.deb
./dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ dpkg-deb -f ./dgtcentaurmods_1.3.3_armhf.deb Depends
ntp, ssmtp, libopenjp2-7-dev, libtiff5, python3-pip, git, socat, authbind, libopenjp2-7, libbluetooth-dev, bluez-tools, libopenblas-dev, python3-dbus, python3-gi, python3-gi-cairo, gir1.2-gtk-3.0
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends dgtcentaurmods
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods
dgtcentaurmods
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends dgtcentaurmods_1.3.3_armhf.deb 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods_1.3.3_armhf.deb
dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ ls
dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ dpkg-deb -f ./dgtcentaurmods_1.3.3_armhf.deb Package Version Depends
Package: dgtcentaurmods
Version: 1.3.3
Depends: ntp, ssmtp, libopenjp2-7-dev, libtiff5, python3-pip, git, socat, authbind, libopenjp2-7, libbluetooth-dev, bluez-tools, libopenblas-dev, python3-dbus, python3-gi, python3-gi-cairo, gir1.2-gtk-3.0
pi@dgt:~/DGTCentaurMods/build/releases $ sudo apt -y install ./dgtcentaurmods_1.3.3_armhf.deb
Note, selecting 'dgtcentaurmods' instead of './dgtcentaurmods_1.3.3_armhf.deb'
Solving dependencies... Error!
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

Unsatisfied dependencies:
 dgtcentaurmods : Depends: ntp but it is not installable
                  Depends: libtiff5 but it is not installable
Error: Unable to correct problems, you have held broken packages.
Error: The following information from --solver 3.0 may provide additional context:
   Unable to satisfy dependencies. Reached two conflicting decisions:
   1. dgtcentaurmods:armhf=1.3.3 is selected for install
   2. dgtcentaurmods:armhf Depends ntp
      but none of the choices are installable:
      [no choices]
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends dgtcentaurmods_1.3.3_armhf.deb 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods_1.3.3_armhf.deb
dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ apt-rdepends $(dpkg-deb -f ./dgtcentaurmods_1.3.3_armhf.deb Package)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
W: Unable to locate package dgtcentaurmods
dgtcentaurmods
pi@dgt:~/DGTCentaurMods/build/releases $ # Make a tiny recursive function with cycle protection
deb_tree() {
  local pkg="$1" indent="${2:-}" seen_var="SEEN_${pkg//[^A-Za-z0-9_]/_}"
  [[ -n "${!seen_var}" ]] && return
  printf -v "$seen_var" '%s' 1; declare -g "$seen_var"
  echo "${indent}${pkg}"
  apt-cache depends "$pkg" 2>/dev/null | awk '/Depends: /{print $2}' | while read -r dep; do
    deb_tree "$dep" "  $indent"
  done
}

PKG=$(dpkg-deb -f ./dgtcentaurmods_1.3.3_armhf.deb Package)
deb_tree "$PKG"
dgtcentaurmods
pi@dgt:~/DGTCentaurMods/build/releases $ ldd /opt/DGTCentaurMods/engines/stockfish_pi
ldd: /opt/DGTCentaurMods/engines/stockfish_pi: No such file or directory
pi@dgt:~/DGTCentaurMods/build/releases $ cat > deb-deptree.sh <<'EOF'
#!/usr/bin/env bash
set -euo pipefail

if [[ $# -ne 1 ]]; then
  echo "Usage: $0 path/to/package.deb" >&2; exit 1
fi

DEB="$1"
if [[ ! -f "$DEB" ]]; then
  echo "Not found: $DEB" >&2; exit 1
fi

# Root package info
ROOT_PKG=$(dpkg-deb -f "$DEB" Package)
ROOT_VER=$(dpkg-deb -f "$DEB" Version)
DEPENDS=$(dpkg-deb -f "$DEB" Depends 2>/dev/null || true)
PREDEP=$(dpkg-deb -f "$DEB" Pre-Depends 2>/dev/null || true)

# Normalize commas; merge Depends + Pre-Depends
ROOT_DEPS=$(printf "%s,%s\n" "$PREDEP" "$DEPENDS" | sed 's/, \+/,/g; s/^,*//; s/,*$//' | tr -s ' ')

declare -A SEEN

indent() { printf "%*s" "$1" ""; }

best_alt() {
  # pick first available alternative from "pkgA (>= ver) | pkgB | pkgC (<< ver)"
  local alt="$1"
  IFS='|' read -ra tokens <<<"$alt"
  for tok in "${tokens[@]}"; do
    tok="$(echo "$tok" | sed 's/^\s*//; s/\s*$//' )"
    # strip version constraint e.g. "pkg (>= 1.2)"
    local name="${tok%% *}"
    # prefer installed or candidate present
    if dpkg -s "$name" &>/dev/null; then echo "$name"; return; fi
    if apt-cache policy "$name" 2>/dev/null | grep -q 'Candidate:'; then echo "$name"; return; fi
  done
  # fallback: first token's name, stripped
  echo "$(echo "${tokens[0]}" | sed 's/^\s*//; s/\s*$//; s/ .*//')"
}

show_pkg() {
  local pkg="$1" level="${2:-0}"
  local key="K::$pkg"
  if [[ -n "${SEEN[$key]:-}" ]]; then
    indent "$level"; echo "└─ $pkg (…already shown)"; return
  fi
  SEEN[$key]=1

  # Show installed or candidate version
  local inst ver cand
  inst=$(dpkg-query -W -f='${Version}\n' "$pkg" 2>/dev/null || true)
  cand=$(apt-cache policy "$pkg" 2>/dev/null | awk '/Candidate:/{print $2}')
  if [[ -n "$inst" ]]; then ver="$inst (installed)"
  elif [[ -n "$cand" && "$cand" != "(none)" ]]; then ver="$cand (candidate)"
  else ver="(unknown)"; fi

chmod +x deb-deptree.shPre-Depends)"s*//; s/\s*$//')"tives,//g'
pi@dgt:~/DGTCentaurMods/build/releases $ ./deb-deptree.sh ./dgtcentaurmods_1.3.3_armhf.deb
dgtcentaurmods [1.3.3]
  └─ ntp [(unknown)]
  └─ ssmtp [2.64-12 (candidate)]
    └─ libc6 [2.41-12+rpt1 (installed)]
      └─ libgcc-s1 [14.2.0-19+rpi1 (installed)]
        └─ gcc-14-base [14.2.0-19+rpi1 (installed)]
        └─ libc6 (…already shown)
    └─ libgnutls-openssl27t64 [3.8.9-3 (candidate)]
      └─ libgnutls30t64 [3.8.9-3 (installed)]
        └─ libc6 (…already shown)
        └─ libgmp10 [2:6.3.0+dfsg-3 (installed)]
          └─ libc6 (…already shown)
        └─ libhogweed6t64 [3.10.1-1 (installed)]
          └─ libc6 (…already shown)
          └─ libgmp10 (…already shown)
          └─ libnettle8t64 [3.10.1-1 (installed)]
            └─ libc6 (…already shown)
        └─ libidn2-0 [2.3.8-2 (installed)]
          └─ libc6 (…already shown)
          └─ libunistring5 [1.3-2 (installed)]
            └─ libc6 (…already shown)
        └─ libnettle8t64 (…already shown)
        └─ libp11-kit0 [0.25.5-3 (installed)]
          └─ libc6 (…already shown)
          └─ libffi8 [3.4.8-2 (installed)]
            └─ libc6 (…already shown)
            └─ libgcc-s1 (…already shown)
        └─ libtasn1-6 [4.20.0-2 (installed)]
          └─ libc6 (…already shown)
        └─ libunistring5 (…already shown)
      └─ libc6 (…already shown)
    └─ debconf [1.5.91 (installed)]
    └─ <debconf-2.0> [(unknown)]
  └─ libopenjp2-7-dev [2.5.3-2.1~deb13u1 (installed)]
    └─ libopenjp2-7 [2.5.3-2.1~deb13u1 (installed)]
      └─ libc6 (…already shown)
  └─ libtiff5 [(unknown)]
  └─ python3-pip [25.1.1+dfsg-1 (installed)]
    └─ ca-certificates [20250419 (installed)]
      └─ openssl [3.5.1-1+deb13u1+rpt1 (installed)]
        └─ libc6 (…already shown)
        └─ libssl3t64 [3.5.1-1+deb13u1+rpt1 (installed)]
          └─ libatomic1 [14.2.0-19+rpi1 (installed)]
            └─ gcc-14-base (…already shown)
            └─ libc6 (…already shown)
          └─ libc6 (…already shown)
          └─ libzstd1 [1.5.7+dfsg-1 (installed)]
            └─ libc6 (…already shown)
          └─ zlib1g [1:1.3.dfsg+really1.3.1-1 (installed)]
            └─ libc6 (…already shown)
          └─ openssl-provider-legacy [3.5.1-1+deb13u1+rpt1 (installed)]
            └─ libc6 (…already shown)
            └─ libssl3t64 (…already shown)
      └─ debconf (…already shown)
      └─ <debconf-2.0> (…already shown)
    └─ python3-wheel [0.46.1-2 (installed)]
      └─ python3-packaging [25.0-1 (installed)]
        └─ <python3:any> [(unknown)]
      └─ <python3:any> (…already shown)
    └─ <python3:any> (…already shown)
  └─ git [1:2.47.3-0+deb13u1 (installed)]
    └─ libc6 (…already shown)
    └─ libcurl3t64-gnutls [8.14.1-1 (installed)]
      └─ libbrotli1 [1.1.0-2+b2 (installed)]
        └─ libc6 (…already shown)
      └─ libc6 (…already shown)
      └─ libgnutls30t64 (…already shown)
      └─ libgssapi-krb5-2 [1.21.3-5+b1 (installed)]
        └─ libkrb5-3 [1.21.3-5+b1 (installed)]
          └─ libkrb5support0 [1.21.3-5+b1 (installed)]
            └─ libc6 (…already shown)
          └─ libc6 (…already shown)
          └─ libcom-err2 [1.47.2-3 (installed)]
            └─ libc6 (…already shown)
          └─ libk5crypto3 [1.21.3-5+b1 (installed)]
            └─ libc6 (…already shown)
            └─ libkrb5support0 (…already shown)
          └─ libkeyutils1 [1.6.3-6+rpi1 (installed)]
            └─ libc6 (…already shown)
          └─ libssl3t64 (…already shown)
        └─ libc6 (…already shown)
        └─ libcom-err2 (…already shown)
        └─ libk5crypto3 (…already shown)
        └─ libkrb5support0 (…already shown)
      └─ libidn2-0 (…already shown)
      └─ libldap2 [2.6.10+dfsg-1 (installed)]
        └─ libc6 (…already shown)
        └─ libsasl2-2 [2.1.28+dfsg1-9 (installed)]
          └─ libsasl2-modules-db [2.1.28+dfsg1-9 (installed)]
            └─ libc6 (…already shown)
            └─ libdb5.3t64 [5.3.28+dfsg2-9 (installed)]
              └─ libc6 (…already shown)
          └─ libc6 (…already shown)
          └─ libssl3t64 (…already shown)
        └─ libssl3t64 (…already shown)
      └─ libnettle8t64 (…already shown)
      └─ libnghttp2-14 [1.64.0-1.1 (installed)]
        └─ libc6 (…already shown)
      └─ libnghttp3-9 [1.8.0-1 (installed)]
        └─ libc6 (…already shown)
      └─ libngtcp2-16 [1.11.0-1+b1 (installed)]
        └─ libc6 (…already shown)
      └─ libngtcp2-crypto-gnutls8 [1.11.0-1+b1 (installed)]
        └─ libc6 (…already shown)
        └─ libgnutls30t64 (…already shown)
        └─ libngtcp2-16 (…already shown)
      └─ libpsl5t64 [0.21.2-1.1 (installed)]
        └─ libidn2-0 (…already shown)
        └─ libc6 (…already shown)
        └─ libunistring5 (…already shown)
      └─ librtmp1 [2.4+20151223.gitfa8646d.1-2+b4 (installed)]
        └─ libc6 (…already shown)
        └─ libgmp10 (…already shown)
        └─ libgnutls30t64 (…already shown)
        └─ libhogweed6t64 (…already shown)
        └─ libnettle8t64 (…already shown)
        └─ zlib1g (…already shown)
      └─ libssh2-1t64 [1.11.1-1 (installed)]
        └─ libc6 (…already shown)
        └─ libssl3t64 (…already shown)
        └─ zlib1g (…already shown)
      └─ libzstd1 (…already shown)
      └─ zlib1g (…already shown)
    └─ libexpat1 [2.7.1-2 (installed)]
      └─ libc6 (…already shown)
      └─ libgcc-s1 (…already shown)
    └─ libpcre2-8-0 [10.46-1~deb13u1+rpi1 (installed)]
      └─ libc6 (…already shown)
    └─ zlib1g (…already shown)
    └─ perl [5.40.1-6 (installed)]
      └─ perl-base [5.40.1-6 (installed)]
        └─ libc6 (…already shown)
        └─ libcrypt1 [1:4.4.38-1 (installed)]
          └─ libc6 (…already shown)
      └─ perl-modules-5.40 [5.40.1-6 (installed)]
        └─ perl-base (…already shown)
      └─ libperl5.40 [5.40.1-6 (installed)]
        └─ libbz2-1.0 [1.0.8-6 (installed)]
          └─ libc6 (…already shown)
        └─ libc6 (…already shown)
        └─ libcrypt1 (…already shown)
        └─ libdb5.3t64 (…already shown)
        └─ libgdbm-compat4t64 [1.24-2 (installed)]
          └─ libc6 (…already shown)
          └─ libgdbm6t64 [1.24-2 (installed)]
            └─ libc6 (…already shown)
        └─ libgdbm6t64 (…already shown)
        └─ zlib1g (…already shown)
        └─ perl-modules-5.40 (…already shown)
    └─ liberror-perl [0.17030-1 (installed)]
      └─ <perl:any> [(unknown)]
    └─ git-man [1:2.47.3-0+deb13u1 (installed)]
    └─ git-man (…already shown)
  └─ socat [1.8.0.3-1 (candidate)]
    └─ libc6 (…already shown)
    └─ libssl3t64 (…already shown)
    └─ libwrap0 [7.6.q-36 (installed)]
      └─ libc6 (…already shown)
  └─ authbind [2.2.0 (candidate)]
    └─ libc6 (…already shown)
  └─ libopenjp2-7 (…already shown)
  └─ libbluetooth-dev [5.82-1.1+rpt1 (candidate)]
    └─ libbluetooth3 [5.82-1.1+rpt1 (installed)]
      └─ libc6 (…already shown)
    └─ libc6-dev [2.41-12+rpt1 (installed)]
      └─ libc6 (…already shown)
      └─ libc-dev-bin [2.41-12+rpt1 (installed)]
        └─ libc6 (…already shown)
        └─ libc6 (…already shown)
      └─ linux-libc-dev [1:6.12.47-1+rpt1 (installed)]
      └─ libcrypt-dev [1:4.4.38-1 (installed)]
        └─ libcrypt1 (…already shown)
      └─ rpcsvc-proto [1.4.3-1 (installed)]
        └─ libc6 (…already shown)
    └─ <libc-dev> [(unknown)]
  └─ bluez-tools [2.0~20170911.0.7cb788c-4+b1 (candidate)]
    └─ libc6 (…already shown)
    └─ libglib2.0-0t64 [2.84.4-3~deb13u1 (installed)]
      └─ libatomic1 (…already shown)
      └─ libc6 (…already shown)
      └─ libffi8 (…already shown)
      └─ libmount1 [2.41-5 (installed)]
        └─ libblkid1 [2.41-5 (installed)]
          └─ libc6 (…already shown)
        └─ libc6 (…already shown)
        └─ libselinux1 [3.8.1-1 (installed)]
          └─ libc6 (…already shown)
          └─ libpcre2-8-0 (…already shown)
      └─ libpcre2-8-0 (…already shown)
      └─ libselinux1 (…already shown)
      └─ zlib1g (…already shown)
    └─ libreadline8t64 [8.2-6 (installed)]
      └─ readline-common [8.2-6 (installed)]
      └─ libc6 (…already shown)
      └─ libtinfo6 [6.5+20250216-2 (installed)]
        └─ libc6 (…already shown)
  └─ libopenblas-dev [0.3.29+ds-3+rpi1+b1 (candidate)]
    └─ libopenblas0 [0.3.29+ds-3+rpi1+b1 (candidate)]
      └─ libopenblas0-pthread [0.3.29+ds-3+rpi1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libgfortran5 [14.2.0-19+rpi1 (candidate)]
          └─ gcc-14-base (…already shown)
          └─ libc6 (…already shown)
          └─ libgcc-s1 (…already shown)
      └─ libopenblas0-openmp [0.3.29+ds-3+rpi1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libgfortran5 (…already shown)
        └─ libgomp1 [14.2.0-19+rpi1 (installed)]
          └─ gcc-14-base (…already shown)
          └─ libc6 (…already shown)
      └─ libopenblas0-serial [0.3.29+ds-3+rpi1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libgfortran5 (…already shown)
    └─ libopenblas-pthread-dev [0.3.29+ds-3+rpi1+b1 (candidate)]
      └─ libopenblas0-pthread (…already shown)
    └─ libopenblas-openmp-dev [0.3.29+ds-3+rpi1+b1 (candidate)]
      └─ libopenblas0-openmp (…already shown)
    └─ libopenblas-serial-dev [0.3.29+ds-3+rpi1+b1 (candidate)]
      └─ libopenblas0-serial (…already shown)
  └─ python3-dbus [1.4.0-1 (candidate)]
    └─ python3 [3.13.5-1 (installed)]
      └─ python3-minimal [3.13.5-1 (installed)]
        └─ python3.13-minimal [3.13.5-2 (installed)]
          └─ libc6 (…already shown)
          └─ libpython3.13-minimal [3.13.5-2 (installed)]
            └─ libc6 (…already shown)
            └─ libssl3t64 (…already shown)
          └─ libatomic1 (…already shown)
          └─ libexpat1 (…already shown)
          └─ zlib1g (…already shown)
        └─ dpkg [1.22.21+rpi1 (installed)]
          └─ libbz2-1.0 (…already shown)
          └─ libc6 (…already shown)
          └─ liblzma5 [5.8.1-1 (installed)]
            └─ libc6 (…already shown)
          └─ libmd0 [1.1.0-2 (installed)]
            └─ libc6 (…already shown)
          └─ libselinux1 (…already shown)
          └─ libzstd1 (…already shown)
          └─ zlib1g (…already shown)
          └─ tar [1.35+dfsg-3.1 (installed)]
            └─ libacl1 [2.3.2-2+rpi1 (installed)]
              └─ libc6 (…already shown)
            └─ libc6 (…already shown)
            └─ libselinux1 (…already shown)
      └─ python3.13 [3.13.5-2 (installed)]
        └─ python3.13-minimal (…already shown)
        └─ libpython3.13-stdlib [3.13.5-2 (installed)]
          └─ libpython3.13-minimal (…already shown)
          └─ media-types [13.0.0 (installed)]
          └─ mime-support [3.66 (candidate)]
            └─ mailcap [3.74 (candidate)]
              └─ perl (…already shown)
              └─ media-types (…already shown)
            └─ media-types (…already shown)
          └─ netbase [6.5 (installed)]
          └─ tzdata [2025b-4+deb13u1 (installed)]
            └─ debconf (…already shown)
            └─ <debconf-2.0> (…already shown)
          └─ libatomic1 (…already shown)
          └─ libbz2-1.0 (…already shown)
          └─ libc6 (…already shown)
          └─ libdb5.3t64 (…already shown)
          └─ libffi8 (…already shown)
          └─ liblzma5 (…already shown)
          └─ libncursesw6 [6.5+20250216-2 (installed)]
            └─ libtinfo6 (…already shown)
            └─ libc6 (…already shown)
          └─ libreadline8t64 (…already shown)
          └─ libsqlite3-0 [3.46.1-7 (installed)]
            └─ libc6 (…already shown)
          └─ libtinfo6 (…already shown)
          └─ libuuid1 [2.41-5 (installed)]
            └─ libc6 (…already shown)
        └─ media-types (…already shown)
        └─ mime-support (…already shown)
        └─ tzdata (…already shown)
      └─ libpython3-stdlib [3.13.5-1 (installed)]
        └─ libpython3.13-stdlib (…already shown)
    └─ python3 (…already shown)
    └─ <python3:any> (…already shown)
    └─ libc6 (…already shown)
    └─ libdbus-1-3 [1.16.2-2 (installed)]
      └─ libc6 (…already shown)
      └─ libsystemd0 [257.8-1~deb13u2+rpi1 (installed)]
        └─ libc6 (…already shown)
        └─ libcap2 [1:2.75-10 (installed)]
          └─ libc6 (…already shown)
    └─ libglib2.0-0t64 (…already shown)
  └─ python3-gi [3.50.0-4 (candidate)]
    └─ gir1.2-glib-2.0 [2.84.4-3~deb13u1 (candidate)]
      └─ libglib2.0-0t64 (…already shown)
    └─ gir1.2-girepository-2.0 [1.84.0-1 (candidate)]
      └─ <gir1.2-gobject-2.0> [(unknown)]
      └─ libgirepository-1.0-1 [1.84.0-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libffi8 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
    └─ python3 (…already shown)
    └─ python3 (…already shown)
    └─ <python3:any> (…already shown)
    └─ libc6 (…already shown)
    └─ libffi8 (…already shown)
    └─ libgirepository-1.0-1 (…already shown)
    └─ <libgirepository-1.0-1-with-libffi8> [(unknown)]
    └─ libglib2.0-0t64 (…already shown)
  └─ python3-gi-cairo [3.50.0-4 (candidate)]
    └─ python3-cairo [1.27.0-2 (candidate)]
      └─ python3 (…already shown)
      └─ python3 (…already shown)
      └─ <python3:any> (…already shown)
      └─ libc6 (…already shown)
      └─ libcairo2 [1.18.4-1+rpt1 (candidate)]
        └─ libc6 (…already shown)
        └─ libfontconfig1 [2.15.0-2.3 (candidate)]
          └─ libc6 (…already shown)
          └─ libexpat1 (…already shown)
          └─ libfreetype6 [2.13.3+dfsg-1 (installed)]
            └─ libbrotli1 (…already shown)
            └─ libbz2-1.0 (…already shown)
            └─ libc6 (…already shown)
            └─ libpng16-16t64 [1.6.48-1 (installed)]
              └─ libc6 (…already shown)
              └─ zlib1g (…already shown)
            └─ zlib1g (…already shown)
          └─ fontconfig-config [2.15.0-2.3 (candidate)]
            └─ debconf (…already shown)
            └─ <debconf-2.0> (…already shown)
            └─ fonts-dejavu-core [2.37-8 (candidate)]
              └─ fonts-dejavu-mono [2.37-8 (candidate)]
            └─ fonts-liberation [1:2.1.5-3 (candidate)]
            └─ fonts-croscore [20201225-2 (candidate)]
            └─ fonts-freefont-otf [20211204+svn4273-2 (candidate)]
            └─ fonts-freefont-ttf [20211204+svn4273-2 (candidate)]
            └─ fonts-urw-base35 [20200910-8 (candidate)]
              └─ xfonts-utils [1:7.7+7 (candidate)]
                └─ libc6 (…already shown)
                └─ libfontenc1 [1:1.1.8-1 (candidate)]
                  └─ libc6 (…already shown)
                  └─ zlib1g (…already shown)
                └─ libfreetype6 (…already shown)
                └─ zlib1g (…already shown)
                └─ x11-common [1:7.7+24 (candidate)]
                  └─ lsb-base [11.6+rpi1 (installed)]
                    └─ sysvinit-utils [3.14-4 (installed)]
                      └─ libc6 (…already shown)
                └─ xfonts-encodings [1:1.0.4-2.2 (candidate)]
                  └─ x11-common (…already shown)
            └─ fonts-texgyre [20180621-6 (candidate)]
            └─ fonts-noto-core [20201225-2 (candidate)]
              └─ fonts-noto-mono [20201225-2 (candidate)]
        └─ libfreetype6 (…already shown)
        └─ libpixman-1-0 [0.44.0-3+rpt1+b1 (candidate)]
          └─ libc6 (…already shown)
        └─ libpng16-16t64 (…already shown)
        └─ libx11-6 [2:1.8.12-1 (installed)]
          └─ libc6 (…already shown)
          └─ libxcb1 [1.17.0-2 (installed)]
            └─ libc6 (…already shown)
            └─ libxau6 [1:1.0.11-1 (installed)]
              └─ libc6 (…already shown)
            └─ libxdmcp6 [1:1.1.5-1 (installed)]
              └─ libc6 (…already shown)
          └─ libx11-data [2:1.8.12-1 (installed)]
        └─ libxcb-render0 [1.17.0-2 (candidate)]
          └─ libc6 (…already shown)
          └─ libxcb1 (…already shown)
        └─ libxcb-shm0 [1.17.0-2 (candidate)]
          └─ libc6 (…already shown)
          └─ libxcb1 (…already shown)
        └─ libxcb1 (…already shown)
        └─ libxext6 [2:1.3.4-1+b1 (installed)]
          └─ libc6 (…already shown)
          └─ libx11-6 (…already shown)
        └─ libxrender1 [1:0.9.12-1 (candidate)]
          └─ libc6 (…already shown)
          └─ libx11-6 (…already shown)
        └─ zlib1g (…already shown)
    └─ python3-gi (…already shown)
    └─ python3 (…already shown)
    └─ python3 (…already shown)
    └─ libc6 (…already shown)
    └─ libcairo-gobject2 [1.18.4-1+rpt1 (candidate)]
      └─ libcairo2 (…already shown)
      └─ libglib2.0-0t64 (…already shown)
    └─ libcairo2 (…already shown)
    └─ libglib2.0-0t64 (…already shown)
  └─ gir1.2-gtk-3.0 [1:3.24.49-3+rpt7 (candidate)]
    └─ gir1.2-atk-1.0 [2.56.2-1 (candidate)]
      └─ <gir1.2-gobject-2.0> (…already shown)
      └─ libatk1.0-0t64 [2.56.2-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ at-spi2-common [2.56.2-1 (candidate)]
    └─ <gir1.2-cairo-1.0> [(unknown)]
    └─ gir1.2-gdkpixbuf-2.0 [2.42.12+dfsg-4 (candidate)]
      └─ <gir1.2-gio-2.0> [(unknown)]
      └─ <gir1.2-gmodule-2.0> [(unknown)]
      └─ libgdk-pixbuf-2.0-0 [2.42.12+dfsg-4 (candidate)]
        └─ libgdk-pixbuf2.0-common [2.42.12+dfsg-4 (candidate)]
        └─ shared-mime-info [2.4-5 (installed)]
          └─ libc6 (…already shown)
          └─ libgcc-s1 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
          └─ libstdc++6 [14.2.0-19+rpi1 (installed)]
            └─ gcc-14-base (…already shown)
            └─ libc6 (…already shown)
            └─ libgcc-s1 (…already shown)
          └─ libxml2 [2.12.7+dfsg+really2.9.14-2.1+deb13u1 (installed)]
            └─ libc6 (…already shown)
            └─ liblzma5 (…already shown)
            └─ zlib1g (…already shown)
        └─ libc6 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ libjpeg62-turbo [1:2.1.5-4 (installed)]
          └─ libc6 (…already shown)
        └─ libpng16-16t64 (…already shown)
        └─ libtiff6 [4.7.0-3+deb13u1 (installed)]
          └─ libc6 (…already shown)
          └─ libdeflate0 [1.23-2 (installed)]
            └─ libc6 (…already shown)
          └─ libjbig0 [2.1-6.1+b1 (installed)]
            └─ libc6 (…already shown)
          └─ libjpeg62-turbo (…already shown)
          └─ liblerc4 [4.0.0+ds-5 (installed)]
            └─ libc6 (…already shown)
            └─ libgcc-s1 (…already shown)
            └─ libstdc++6 (…already shown)
          └─ liblzma5 (…already shown)
          └─ libwebp7 [1.5.0-0.1 (installed)]
            └─ libc6 (…already shown)
            └─ libsharpyuv0 [1.5.0-0.1 (installed)]
              └─ libc6 (…already shown)
          └─ libzstd1 (…already shown)
          └─ zlib1g (…already shown)
    └─ <gir1.2-gio-2.0> (…already shown)
    └─ gir1.2-pango-1.0 [1.56.3-1 (candidate)]
      └─ <gir1.2-cairo-1.0> (…already shown)
      └─ <gir1.2-fontconfig-2.0> [(unknown)]
      └─ <gir1.2-freetype2-2.0> [(unknown)]
      └─ <gir1.2-gio-2.0> (…already shown)
      └─ <gir1.2-gobject-2.0> (…already shown)
      └─ gir1.2-harfbuzz-0.0 [10.2.0-1+b1 (candidate)]
        └─ <gir1.2-freetype2-2.0> (…already shown)
        └─ <gir1.2-gobject-2.0> (…already shown)
        └─ libharfbuzz-gobject0 [10.2.0-1+b1 (candidate)]
          └─ libc6 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
          └─ libharfbuzz0b [10.2.0-1+b1 (installed)]
            └─ libc6 (…already shown)
            └─ libfreetype6 (…already shown)
            └─ libglib2.0-0t64 (…already shown)
            └─ libgraphite2-3 [1.3.14-2 (installed)]
              └─ libc6 (…already shown)
        └─ libharfbuzz0b (…already shown)
      └─ <gir1.2-xft-2.0> [(unknown)]
      └─ <gir1.2-xlib-2.0> [(unknown)]
      └─ libpango-1.0-0 [1.56.3-1 (candidate)]
        └─ fontconfig [2.15.0-2.3 (candidate)]
          └─ libc6 (…already shown)
          └─ libfontconfig1 (…already shown)
          └─ libfreetype6 (…already shown)
          └─ fontconfig-config (…already shown)
        └─ libc6 (…already shown)
        └─ libfribidi0 [1.0.16-1 (installed)]
          └─ libc6 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ libharfbuzz0b (…already shown)
        └─ libthai0 [0.1.29-2 (candidate)]
          └─ libthai-data [0.1.29-2 (candidate)]
          └─ libc6 (…already shown)
          └─ libdatrie1 [0.2.13-3 (candidate)]
            └─ libc6 (…already shown)
      └─ libpangocairo-1.0-0 [1.56.3-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libcairo2 (…already shown)
        └─ libfontconfig1 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ libharfbuzz0b (…already shown)
        └─ libpango-1.0-0 (…already shown)
        └─ libpangoft2-1.0-0 [1.56.3-1 (candidate)]
          └─ libc6 (…already shown)
          └─ libfontconfig1 (…already shown)
          └─ libfreetype6 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
          └─ libharfbuzz0b (…already shown)
          └─ libpango-1.0-0 (…already shown)
      └─ libpangoft2-1.0-0 (…already shown)
      └─ libpangoxft-1.0-0 [1.56.3-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libfontconfig1 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ libpango-1.0-0 (…already shown)
        └─ libpangoft2-1.0-0 (…already shown)
        └─ libx11-6 (…already shown)
        └─ libxft2 [2.3.6-1+b1 (candidate)]
          └─ libc6 (…already shown)
          └─ libfontconfig1 (…already shown)
          └─ libfreetype6 (…already shown)
          └─ libx11-6 (…already shown)
          └─ libxrender1 (…already shown)
        └─ libxrender1 (…already shown)
    └─ <gir1.2-xlib-2.0> (…already shown)
    └─ libgtk-3-0t64 [1:3.24.49-3+rpt7 (candidate)]
      └─ adwaita-icon-theme [48.1-1 (candidate)]
        └─ gtk-update-icon-cache [4.18.6+ds-2 (candidate)]
          └─ libc6 (…already shown)
          └─ libgdk-pixbuf-2.0-0 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
        └─ hicolor-icon-theme [0.18-2 (candidate)]
      └─ hicolor-icon-theme (…already shown)
      └─ shared-mime-info (…already shown)
      └─ libatk-bridge2.0-0t64 [2.56.2-1 (candidate)]
        └─ libatk1.0-0t64 (…already shown)
        └─ libatspi2.0-0t64 [2.56.2-1 (candidate)]
          └─ libc6 (…already shown)
          └─ libdbus-1-3 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
          └─ libx11-6 (…already shown)
          └─ libxi6 [2:1.8.2-1 (candidate)]
            └─ libc6 (…already shown)
            └─ libx11-6 (…already shown)
            └─ libxext6 (…already shown)
        └─ libc6 (…already shown)
        └─ libdbus-1-3 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
      └─ libatk1.0-0t64 (…already shown)
      └─ libc6 (…already shown)
      └─ libcairo-gobject2 (…already shown)
      └─ libcairo2 (…already shown)
      └─ libcloudproviders0 [0.3.6-2 (candidate)]
        └─ libc6 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
      └─ libcolord2 [1.4.7-3 (candidate)]
        └─ libc6 (…already shown)
        └─ libglib2.0-0t64 (…already shown)
        └─ liblcms2-2 [2.16-2 (installed)]
          └─ libc6 (…already shown)
        └─ libudev1 [257.8-1~deb13u2+rpi1 (installed)]
          └─ libc6 (…already shown)
          └─ libcap2 (…already shown)
      └─ libcups2t64 [2.4.10-3+deb13u1 (candidate)]
        └─ libavahi-client3 [0.8-16 (candidate)]
          └─ libavahi-common3 [0.8-16 (installed)]
            └─ libc6 (…already shown)
            └─ libavahi-common-data [0.8-16 (installed)]
          └─ libc6 (…already shown)
          └─ libdbus-1-3 (…already shown)
        └─ libavahi-common3 (…already shown)
        └─ libc6 (…already shown)
        └─ libgnutls30t64 (…already shown)
        └─ libgssapi-krb5-2 (…already shown)
        └─ zlib1g (…already shown)
      └─ libepoxy0 [1.5.10-2 (candidate)]
        └─ libc6 (…already shown)
      └─ libfontconfig1 (…already shown)
      └─ libfribidi0 (…already shown)
      └─ libgdk-pixbuf-2.0-0 (…already shown)
      └─ libglib2.0-0t64 (…already shown)
      └─ libharfbuzz0b (…already shown)
      └─ libpango-1.0-0 (…already shown)
      └─ libpangocairo-1.0-0 (…already shown)
      └─ libpangoft2-1.0-0 (…already shown)
      └─ libwayland-client0 [1.23.1-3+rpt1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libffi8 (…already shown)
      └─ libwayland-cursor0 [1.23.1-3+rpt1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libwayland-client0 (…already shown)
      └─ libwayland-egl1 [1.23.1-3+rpt1+b1 (candidate)]
        └─ libc6 (…already shown)
      └─ libx11-6 (…already shown)
      └─ libxcomposite1 [1:0.4.6-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libx11-6 (…already shown)
      └─ libxcursor1 [1:1.2.3-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libx11-6 (…already shown)
        └─ libxfixes3 [1:6.0.0-2+b1 (candidate)]
          └─ libc6 (…already shown)
          └─ libx11-6 (…already shown)
        └─ libxrender1 (…already shown)
      └─ libxdamage1 [1:1.1.6-1+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libx11-6 (…already shown)
      └─ libxext6 (…already shown)
      └─ libxfixes3 (…already shown)
      └─ libxi6 (…already shown)
      └─ libxinerama1 [2:1.1.4-3+b1 (candidate)]
        └─ libc6 (…already shown)
        └─ libx11-6 (…already shown)
        └─ libxext6 (…already shown)
      └─ libxkbcommon0 [1.7.0-2 (candidate)]
        └─ xkb-data [2.42-1 (installed)]
        └─ libc6 (…already shown)
      └─ libxrandr2 [2:1.5.4-1 (candidate)]
        └─ libc6 (…already shown)
        └─ libx11-6 (…already shown)
        └─ libxext6 (…already shown)
        └─ libxrender1 (…already shown)
      └─ libgtk-3-common [1:3.24.49-3+rpt7 (candidate)]
        └─ dconf-gsettings-backend [0.40.0-5 (candidate)]
          └─ dconf-service [0.40.0-5 (candidate)]
            └─ <default-dbus-session-bus> [(unknown)]
            └─ <dbus-session-bus> [(unknown)]
            └─ libdconf1 [0.40.0-5 (installed)]
              └─ libc6 (…already shown)
              └─ libglib2.0-0t64 (…already shown)
            └─ procps [2:4.0.4-9 (installed)]
              └─ libc6 (…already shown)
              └─ libncursesw6 (…already shown)
              └─ libproc2-0 [2:4.0.4-9 (installed)]
                └─ libc6 (…already shown)
                └─ libsystemd0 (…already shown)
              └─ libsystemd0 (…already shown)
              └─ libtinfo6 (…already shown)
              └─ init-system-helpers [1.69~deb13u1 (installed)]
            └─ libc6 (…already shown)
            └─ libglib2.0-0t64 (…already shown)
          └─ dconf-service (…already shown)
          └─ libdconf1 (…already shown)
          └─ libc6 (…already shown)
          └─ libglib2.0-0t64 (…already shown)
        └─ <gsettings-backend> [(unknown)]
    └─ libgtk-3-common (…already shown)
pi@dgt:~/DGTCentaurMods/build/releases $ git status
On branch master
Your branch is up to date with 'origin/master'.

Untracked files:
  (use "git add <file>..." to include in what will be committed)
  ./

nothing added to commit but untracked files present (use "git add" to track)
pi@dgt:~/DGTCentaurMods/build/releases $ cd ../
pi@dgt:~/DGTCentaurMods/build $ cd releases
pi@dgt:~/DGTCentaurMods/build/releases $ ls
deb-deptree.sh  dgtcentaurmods_1.3.3_armhf.deb
pi@dgt:~/DGTCentaurMods/build/releases $ nano deb-deptree.sh

  GNU nano 8.4                                                                                      deb-deptree.sh *                                                                                              
#!/usr/bin/env bash
set -euo pipefail

if [[ $# -ne 1 ]]; then
  echo "Usage: $0 path/to/package.deb" >&2; exit 1
fi

DEB="$1"
if [[ ! -f "$DEB" ]]; then
  echo "Not found: $DEB" >&2; exit 1
fi

# Root package info
ROOT_PKG=$(dpkg-deb -f "$DEB" Package)
ROOT_VER=$(dpkg-deb -f "$DEB" Version)
DEPENDS=$(dpkg-deb -f "$DEB" Depends 2>/dev/null || true)
PREDEP=$(dpkg-deb -f "$DEB" Pre-Depends 2>/dev/null || true)

# Normalize commas; merge Depends + Pre-Depends
ROOT_DEPS=$(printf "%s,%s\n" "$PREDEP" "$DEPENDS" | sed 's/, \+/,/g; s/^,*//; s/,*$//' | tr -s ' ')

declare -A SEEN

indent() { printf "%*s" "$1" ""; }

best_alt() {
  # pick first available alternative from "pkgA (>= ver) | pkgB | pkgC (<< ver)"
  local alt="$1"
  IFS='|' read -ra tokens <<<"$alt"
  for tok in "${tokens[@]}"; do
    tok="$(echo "$tok" | sed 's/^\s*//; s/\s*$//' )"
    # strip version constraint e.g. "pkg (>= 1.2)"
    local name="${tok%% *}"
    # prefer installed or candidate present
    if dpkg -s "$name" &>/dev/null; then echo "$name"; return; fi
    if apt-cache policy "$name" 2>/dev/null | grep -q 'Candidate:'; then echo "$name"; return; fi
  done
  # fallback: first token's name, stripped
  echo "$(echo "${tokens[0]}" | sed 's/^\s*//; s/\s*$//; s/ .*//')"
}

show_pkg() {
  local pkg="$1" level="${2:-0}"
  local key="K::$pkg"
  if [[ -n "${SEEN[$key]:-}" ]]; then
    indent "$level"; echo "└─ $pkg (…already shown)"; return
  fi
  SEEN[$key]=1

  # Show installed or candidate version
  local inst ver cand
  inst=$(dpkg-query -W -f='${Version}\n' "$pkg" 2>/dev/null || true)
  cand=$(apt-cache policy "$pkg" 2>/dev/null | awk '/Candidate:/{print $2}')
  if [[ -n "$inst" ]]; then ver="$inst (installed)"
  elif [[ -n "$cand" && "$cand" != "(none)" ]]; then ver="$cand (candidate)"
  else ver="(unknown)"; fi

  indent "$level"; echo "└─ $pkg ${ver:+[$ver]}"

  # Recurse on Depends + Pre-Depends known to APT
  # Use apt-cache depends to expand recursively
  local deps=()
  while IFS= read -r d; do deps+=("$d"); done < <(
    apt-cache depends "$pkg" 2>/dev/null \
      | awk '/(Depends|PreDepends): /{print $2}' | sed 's/,//g'
  )

  local next
  for next in "${deps[@]}"; do
    show_pkg "$next" $((level+2))
  done
}

echo "${ROOT_PKG} [${ROOT_VER}]"
if [[ -n "$ROOT_DEPS" ]]; then
  # split on commas (top-level), then resolve alternatives
  IFS=',' read -ra dep_items <<<"$ROOT_DEPS"
  for item in "${dep_items[@]}"; do
    item="$(echo "$item" | sed 's/^\s*//; s/\s*$//')"
    [[ -z "$item" ]] && continue
    sel="$(best_alt "$item")"
    show_pkg "$sel" 2
  done
else
  echo "└─ (no Depends/Pre-Depends)"
fi