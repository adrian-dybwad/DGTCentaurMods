{# Shared chessboard component for consistent board display across pages #}
{# Usage: {% include 'chessboard_component.html' %} #}
{# Required variables: fen (optional, defaults to starting position) #}
{# Optional variables: board_id (default: 'board1'), board_width (default: 600) #}

{% set board_id = board_id|default('board1') %}
{% set board_width = board_width|default(600) %}

<div id="chessboard-container" class="chessboard-wrapper">
    <style>
        .chessboard-wrapper {
            max-width: 100%;
        }
        #{{ board_id }} {
            width: 100%;
            max-width: {{ board_width }}px;
        }
        /* Original gray tones matching DGT board */
        .white-1e1d7 { background-color: #e5e5e5; color: #131313 }
        .black-3c85d { background-color: #b2b2b2; color: #131313 }
    </style>
    <div id='{{ board_id }}'></div>
</div>

<script src="{{ url_for('static', filename='js/jquery-3.4.1.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='chessboardjs/js/chessboard-1.0.0.min.js') }}"></script>
<script>
var {{ board_id }}Fen = '{{ fen|default("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1") }}';
var {{ board_id }}Config = {
    position: {{ board_id }}Fen,
    pieceTheme: "{{ url_for('piece_svg', piece_code='wK') }}".replace("wK.svg", "{piece}.svg")
};
var {{ board_id }} = Chessboard('{{ board_id }}', {{ board_id }}Config);

window.addEventListener('resize', function() {
    {{ board_id }}.resize();
});
</script>

