<!DOCTYPE html>
<html lang="en">
<!--
  # This file is part of the Universal Chess project
  # ( https://github.com/adrian-dybwad/Universal-Chess )
  #
  # Universal Chess is free software: you can redistribute
  # it and/or modify it under the terms of the GNU General Public
  # License as published by the Free Software Foundation, either
  # version 3 of the License, or (at your option) any later version.
  #
  # Universal Chess is distributed in the hope that it will
  # be useful, but WITHOUT ANY WARRANTY; without even the implied warranty
  # of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  # GNU General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
  # along with this file.  If not, see
  # https://github.com/adrian-dybwad/Universal-Chess/blob/main/LICENSE
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#aa44aa">
    <title>Universal Chess</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='chessboardjs/css/chessboard-1.0.0.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
    <style>
        /* Three-column layout overrides */
        .three-column-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-lg);
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }
        
        @media (min-width: 768px) {
            .three-column-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .three-column-container {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }
        
        .column-panel {
            background: var(--color-bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }
        
        /* Panel styles to match Bulma's panel component */
        .panel.is-info .panel-heading {
            background: linear-gradient(135deg, #aa44aa 0%, #8a3490 100%);
            color: white;
            padding: var(--spacing-md);
            font-weight: 600;
        }
        
        .panel-block {
            padding: var(--spacing-md);
            display: block;
        }
        
        .panel-block + .panel-block {
            border-top: 1px solid var(--color-bg-tertiary);
        }
        
        /* Form elements */
        .input, .textarea, .select {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--color-bg-tertiary);
            border-radius: var(--radius-sm);
            font-family: var(--font-family-primary);
            font-size: 0.875rem;
            width: 100%;
        }
        
        .input:focus, .textarea:focus, .select:focus {
            border-color: #aa44aa;
            outline: none;
            box-shadow: 0 0 0 3px rgba(170, 68, 170, 0.1);
        }
        
        /* Tags */
        .tag {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--color-bg-tertiary);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            margin-right: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
        }
        
        .tag.is-warning { background: #fff3cd; color: #856404; }
        .tag.is-warning.is-light { background: #fffbea; color: #856404; }
        .tag.is-danger { background: #f8d7da; color: #721c24; }
        .tag.is-danger.is-light { background: #fef0f0; color: #721c24; }
        
        /* Buttons */
        .button {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: var(--radius-sm);
            font-family: var(--font-family-primary);
            cursor: pointer;
            font-size: 0.875rem;
            background: linear-gradient(135deg, #aa44aa 0%, #8a3490 100%);
            color: white;
            transition: var(--transition-fast);
        }
        
        .button:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        .is-pulled-right {
            float: right;
        }
        
        /* File input */
        .file-label {
            cursor: pointer;
        }
        
        .file-input {
            display: none;
        }
        
        .file-cta {
            display: inline-block;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-bg-tertiary);
            border-radius: var(--radius-sm);
        }
        
        .file-name {
            margin-left: var(--spacing-sm);
            color: var(--color-text-secondary);
        }
        
        /* Hidden elements for compatibility */
        #lastpgndiv, #lastestgamesdiv {
            display: none;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">
                <img src="/logo" alt="Universal Chess" class="navbar-logo">
                <div class="navbar-brand-text">
                    <span class="navbar-title">Universal Chess</span>
                    <span class="navbar-slogan">Connect, play, and analyze chess on your smart chess board</span>
                </div>
            </a>
            <div class="navbar-menu">
                <a href="/" class="navbar-item">Home</a>
                <a href="/pgn" class="navbar-item">Games</a>
                <a href="/configure" class="navbar-item">Configure</a>
                {% if rodentiv_installed %}
                <a href="/rodentivtuner" class="navbar-item">RodentIV Config</a>
                {% endif %}
                <a href="/support" class="navbar-item">Support</a>
                <a href="/license" class="navbar-item">Licenses</a>
            </div>
        </div>
    </nav>
    
    <main class="main-content">
        <div class="three-column-container">
            <div class="column-panel" id="maincolumn">
                {% block mainpage %}{% endblock %}
            </div>
            <div class="column-panel">
                {% block second %}{% endblock %}
            </div>
            <div class="column-panel">
                {% block third %}{% endblock %}
            </div>
        </div>
    </main>
    
    <!-- Hidden elements for compatibility with legacy JS -->
    <div id="lastpgndiv">
        <textarea id="lastpgn" class="textarea" rows="12"></textarea>
    </div>
    <div id="lastestgamesdiv">
        <div id="gameslisting"></div>
    </div>
    <div id="moveholder"></div>
    
    <footer class="footer">
        <div class="footer-content">
            <p><strong>Universal Chess</strong> &copy; {{ current_year }} - 
                <a href="{{ repo_url }}">View on GitHub</a>
            </p>
        </div>
    </footer>
    
    <script>
        // Legacy compatibility functions
        Object.size = function(obj) {
            var size = 0, key;
            for (key in obj) {
                if (obj.hasOwnProperty(key)) size++;
            }
            return size;
        };
        
        function hideLastPGN() {
            document.getElementById("lastpgndiv").style.display = "none";
        }
        
        function showLastPGN() {
            document.getElementById("lastpgndiv").style.display = "block";
        }
        
        function hideLastGames() {
            document.getElementById("lastestgamesdiv").style.display = "none";
        }
        
        function showLastGames() {
            document.getElementById("lastestgamesdiv").style.display = "block";
        }
        
        function getGamesPGNList() {
            // Stub for compatibility - full implementation in pgn.html
        }
    </script>
</body>
</html>
